# Migration `20190727105933-add-diff-relation`

This migration has been generated by Mitko Tschimev at 7/27/2019, 10:59:33 AM.
You can check out the [state of the datamodel](./datamodel.prisma) after the migration.

## Database Steps

```sql

```

## Changes

```diff
diff --git datamodel.mdl datamodel.mdl
migration 20190726231506-init..20190727105933-add-diff-relation
--- datamodel.dml
+++ datamodel.dml
@@ -2,23 +2,13 @@
   provider = "postgresql"
   url      = env("VK_POSTGRES_URL")
 }
-// datasource db {
-//   provider = "sqlite"
-//   url      = "file:dev.db"
-//   default  = true
-// }
-
 generator photon {
   provider = "photonjs"
+  output   = "src/lib/@generated/photonjs"
 }
-generator nexus_prisma {
-  provider = "nexus-prisma"
-  output   = "node_modules/@generated/nexus-prisma"
-}
-
 model User {
   id        Int      @id
   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
@@ -83,9 +73,14 @@
   stateChangedByUser User?
   stateComment       String?
   autoBaseline       Boolean          @default(false)
+  // baseline reference
   baselineRef Variation? @relation(name: "VariationBaseline")
+
+  // reference to the diff
+  baselineForDiffRef TestSession? @relation(name: "DiffBaselineOnTestSession")
+  diffBaseline       TestSession? @relation(name: "DiffBaselineOnTestSession")
 }
 enum Role {
   CUSTOMER
```

## Photon Usage

You can use a specific Photon built for this migration (20190727105933-add-diff-relation)
in your `before` or `after` migration script like this:

```ts
import Photon from '@generated/photon/20190727105933-add-diff-relation'

const photon = new Photon()

async function main() {
  const result = await photon.users()
  console.dir(result, { depth: null })
}

main()

```
